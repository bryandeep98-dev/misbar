<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Sitemap Generator</title>
</head>
<body>
    <h3>Copy kode di bawah ini dan simpan sebagai sitemap.xml</h3>
    <textarea id="output" style="width: 100%; height: 500px; font-family: monospace;"></textarea>

    <script>
        // Ganti URL ini jika nama file JSON Anda berbeda
        fetch('movies.json')
            .then(response => response.json())
            .then(data => {
                let xmlContent = '<?xml version="1.0" encoding="UTF-8"?>\n';
                xmlContent += '<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">\n';

                // 1. Tambahkan Halaman Utama
                xmlContent += '  <url>\n';
                xmlContent += '    <loc>https://www.misbar21.com/</loc>\n';
                xmlContent += '    <priority>1.00</priority>\n';
                xmlContent += '  </url>\n';

                // 2. Loop semua film dari JSON
                data.forEach(movie => {
                    // Pastikan ID ada
                    if(movie.id) {
                        xmlContent += '  <url>\n';
                        // URL menggunakan parameter ?id=...
                        xmlContent += `    <loc>https://www.misbar21.com/watch.html?id=${movie.id}</loc>\n`;
                        xmlContent += '    <priority>0.80</priority>\n';
                        xmlContent += '  </url>\n';
                    }
                });

                xmlContent += '</urlset>';

                // Tampilkan di Textarea
                document.getElementById('output').value = xmlContent;
            })
            .catch(error => {
                document.getElementById('output').value = "Gagal membaca movies.json. Pastikan file ini satu folder dengan movies.json";
                console.error(error);
            });
    </script>
</body>
</html>